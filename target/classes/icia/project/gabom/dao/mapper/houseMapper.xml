<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="icia.project.gabom.dao.IhouseDao">

<insert id="houseRegisterUpload" parameterType="house">
	INSERT INTO REGISTHOUSE VALUES(SQ_REGISTHOUSE.nextval,#{house_hostid},#{house_name},#{house_address},#{house_person},#{house_parkable},#{house_rooms},#{house_beds},#{house_bathrooms},#{house_mindate},#{house_maxdate},#{house_price},#{house_type},0,#{house_xpoint},#{house_ypoint})
		<selectKey keyProperty="house_number" resultType="integer" order="AFTER">
				SELECT SQ_REGISTHOUSE.CURRVAL FROM DUAL
			</selectKey>
	</insert>
	
	<insert id="housereservation" parameterType="hreservation" >
	INSERT INTO HOUSERESERVATION VALUES(SQ_HOUSERESERVATION.nextval,#{house_number},#{house_hostid},#{member_guestid},#{reservation_checkin},#{reservation_checkout},#{reservation_person},#{reservation_totalprice},0)
			<selectKey keyProperty="reservation_number" resultType="integer" order="AFTER">
				SELECT SQ_HOUSERESERVATION.CURRVAL FROM DUAL
			</selectKey>
	</insert>
	
	<insert id="insertreple">
		INSERT INTO HOUSEREPLE VALUES(SEQ_HOUSE_REPLE_NUMBER.nextval,#{house_number},#{member_guestid},SYSDATE,#{house_reple_content})
	</insert>
	
	
	<select id="reviewlist" resultType="hreview">
		SELECT * FROM HOUSE_REVIEW
		WHERE HOUSE_NUMBER=#{house_number}
	</select>
	
	<select id="showhreview" resultType="hreview">
		SELECT HR.HOUSE_REVIEW_CONTENT, HR.HOUSE_REVIEW_DATE ,HRI.HOUSE_REVIEW_SYSFILE
	FROM HOUSE_REVIEW HR, HOUSE_REVIEW_IMAGE HRI
	WHERE HR.HOUSE_REVIEW_NUMBER=HRI.HOUSE_REVIEW_NUMBER AND HR.HOUSE_REVIEW_NUMBER=#{house_review_number}
	</select>
	
</mapper>